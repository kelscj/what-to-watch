{% extends "base.html" %}

{% block content %}
<div class ="content">
    <h1>What Should We Watch? ðŸŽ¬</h1>
    <form method="GET" action="/" class="filter-form">
        <div class="search-bar">
            <input type="text" name="query" placeholder="Search keywords for your movie recommendations (ex: Action, Cats)" value="{{ query }}" size="80">
            <button type="submit">Search Movies</button>
        </div>
        <br>
        <div class="filters">
            <div>
                <label for="genre">Genre:</label>
                <select name="genre" id="genre" multiple>
                    <option value="">Any</option>
                    {% for g in [
                        'Action & Adventure', 'Animation', 'Arts & Culture', 'Black Stories', 'Classics', 'Comedy', 'Crime', 
                        'Documentary', 'Faith & Spirituality', 'History', 'Horror', 'International', 'Kids & Family', 'Latino', 
                        'Lifestyle', 'LGBTQ+', 'Movies', 'Music', 'Mystery', 'Reality', 'Romance', 'Romance Comedy', 'Sci-Fi & Fantasy', 
                        'Science & Tech', 'Series', 'Special Interest', 'Sports', 'Talk Show', 'Teen', 'Thriller', 'TV Series'

                    ] %}
                        <option value="{{ g }}" {% if request.args.get('genre') == g %}selected{% endif %}>{{ g }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="service">Streaming Service:</label>
                <select name="service" id="service" multiple>
                    <option value="">Any</option>
                    <option value="Netflix">Netflix</option>
                    <option value="Hulu">Hulu</option>
                    <option value="Disney Plus">Disney Plus</option>
                    <option value="Prime Video">Prime Video</option>
                </select>
            </div>
            <div>
                <label for="type">TV Show vs Movie:</label>
                <select name="type" id="type">
                    <option value="">Any</option>
                    <option value="Movie">Movie</option>
                    <option value="TV Show">TV Show</option>
                </select>
            </div>
            <div>
                <label for="rating">Rating:</label>
                <select name="rating" id="rating" multiple>
                    <option value="">Any</option>
                    <option value="TV-G">TV-G</option>
                    <option value="TV-PG">TV-PG</option>
                    <option value="PG-13">PG-13</option>
                    <option value="R">R</option>
                    <option value="TV-MA">TV-MA</option>
                    <option value="TV-Y">TV-Y</option>
                    <option value="TV-Y7">TV-Y7</option>
                    <option value="TV-14">TV-14</option>
                    <option value="Ages 13+">Ages 13+</option>
                    <option value="Ages 16+">Ages 16+</option>
                    <option value="Ages 18+">Ages 18+</option>
                    <option value="Not Rated">Not Rated</option>
                </select>
            </div>
        </div>
    </form>


    {% if tasks %}
        <h2>Results:</h2>
        <ul>
        {% for task in tasks %}
            <li>
                <strong>{{ task.title }}</strong> - {{ task.listed_in }} - {{task.duration}} mins - {{task.release_year}} - {{task.rating}}<br>
                Stream on: <strong>{{ task.service }}</strong> - Directed by: {{ task.director }} <br>
                <em>{{ task.description }}</em>
            </li>
        {% endfor %}
        </ul>
    {% elif query %}
        <p>No results found for "{{ query }}".</p>
    {% endif %}
</div>
{% endblock %}

